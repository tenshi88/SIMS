<!-- SubTitleの設定 -->
{% set subTitle = '管理設定' %}

<!-- layoutの決定 -->
{% extends 'layout.html' %}

<!-- コンテンツ -->
{% block contents %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/student_list.css') }}"></link>
{{ super() }}
<div class="container">

    <h2>管理設定</h2>

    <!-- ユーザー一覧 -->
    <div class="row g-1 mt-3">
        <div class="col-auto">
            <h5 class="pt-1">ユーザー一覧</h5>
        </div>
    </div>
    <div class="row g-1">
        <table class="table table-striped table-hover mb-0">
            <tr>
                <th>#</th>
                <th>ユーザーID</th>
                <th>操作</th>
            </tr>
            {% for user in users %}
            <tr>
                <td>{{ user.id }}</td>
                <td>{{ user.user_id }}</td>
                <td>
                    <button class="btn btn-primary" name="edit-user" data-id="{{ user.id }}" data-user-id="{{ user.user_id }}" data-password="{{ user.password }}">編集</button>
                </td>
            </tr>
            {% endfor %}
        </table>
        <button name="add-user" class="col-auto btn btn-primary ml-auto">ユーザー追加</button>
    </div>

    <!-- 学校一覧 -->
    <div class="row g-1 mt-3">
        <div class="col-auto">
            <h5 class="pt-1">学校一覧</h5>
        </div>
    </div>
    <div class="row g-1">
        <table class="table table-striped table-hover mb-0">
            <tr>
                <th>#</th>
                <th>学校名</th>
                <th>操作</th>
            </tr>
            {% for school in schools %}
            <tr>
                <td>{{ school.id }}</td>
                <td>{{ school.name }}</td>
                <td>
                    <button class="btn btn-primary" name="edit-school" data-id="{{ school.id }}" data-school-name="{{ school.name }}">編集</button>
                </td>
            </tr>
            {% endfor %}
        </table>
        <button name="add-school" class="col-auto btn btn-primary">学校追加</button>
    </div>

    <!-- クラス一覧 -->
    <div class="row g-1 mt-3">
        <div class="col-auto">
            <h5 class="pt-1">クラス一覧</h5>
        </div>
    </div>
    <div class="row g-1">
        <table class="table table-striped table-hover mb-0">
            <tr>
                <th>#</th>
                <th>クラス名</th>
                <th>操作</th>
            </tr>
            {% for class_ in classes %}
            <tr>
                <td>{{ class_.id }}</td>
                <td>{{ class_.name }}</td>
                <td>
                    <button class="btn btn-primary" name="edit-class" data-id="{{ class_.id }}" data-class-name="{{ class_.name }}">編集</button>
                </td>
            </tr>
            {% endfor %}
        </table>
        <button name="add-class" class="col-auto btn btn-primary">クラス追加</button>
    </div>
    
    <!-- モーダル -->
    <div class="modal fade" id="modal-main" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="modalLabel"></h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body"></div>
                <div class="modal-footer"></div>
            </div>
        </div>
    </div>

    {{ '<script>{}</script>'.format('
        let schools = ' ~ schools | tojson ~ ';
        let classes = ' ~ classes | tojson ~ ';
        let users = ' ~ users | tojson ~ ';
    ') | safe }}
    <script src="{{ url_for('static', filename='js/admin_panel.js') }}"></script>
</div>
{% endblock %}